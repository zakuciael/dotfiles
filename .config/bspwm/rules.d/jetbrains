#!/bin/sh

source "/home/zakku/.config/bspwm/rules.tools"
init $@

WINDOW_NAME=$(window_prop $WINDOW_ID "WM_NAME")

floating() {
  local ARGS=$@
  echo "state=floating center=on $ARGS"
}

desktop() {
  local ARGS=$@
  echo "desktop=^1 $ARGS"
}

output() {
  local ARGS=$@
  echo "desktop=^1 state=floating center=on $ARGS"
}

if [[ "$CLASS_NAME" == jetbrains-* ]] || [[ "$CLASS_NAME" == "kotlinx-coroutines-scheduling-CoroutineScheduler\$Worker" ]]; then
  if [[ "$WINDOW_NAME" = "splash" ]]; then
    desktop $(floating) "border=off"
  elif [[ "$WINDOW_NAME" == "Welcome to "* ]]; then
    desktop $(floating)
  elif [[ "$WINDOW_NAME" == "Import "* ]] && [[ "$WINDOW_NAME" == *"Settings" ]]; then
    desktop $(floating)
  elif [[ "$WINDOW_NAME" == *" and Plugin Updates" ]]; then
    desktop $(floating)
  elif [[ "$WINDOW_NAME" == *"User Agreement" ]]; then
    desktop $(floating)
  else
    desktop
  fi
else
 skip
fi
